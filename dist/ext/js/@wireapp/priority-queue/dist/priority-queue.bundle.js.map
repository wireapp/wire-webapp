{"version":3,"sources":["webpack://PriorityQueue/webpack/bootstrap","webpack://PriorityQueue/./dist/index.js","webpack://PriorityQueue/./dist/Priority.js","webpack://PriorityQueue/./dist/Item.js","webpack://PriorityQueue/./dist/PriorityQueue.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Item_1","Item","default","Priority_1","Priority","PriorityQueue_1","PriorityQueue","this","fn","priority","MEDIUM","reject","resolve","retry","Infinity","timestamp","__assign","assign","arguments","length","apply","config","comparator","a","b","maxRetries","retryDelay","isPending","queue","add","thunkedPromise","label","_this","Promise","queueObject","Number","Date","now","size","push","sort","run","delete","filter","item","deleteAll","configurable","resolveItems","first","then","result","shouldContinue","wrappedResolve","catch","error","setTimeout","_a","shift","toString","map","index","replace","join"],"mappings":"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","file":"priority-queue.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Item_1 = require(\"./Item\");\nexports.Item = Item_1.default;\nvar Priority_1 = require(\"./Priority\");\nexports.Priority = Priority_1.default;\nvar PriorityQueue_1 = require(\"./PriorityQueue\");\nexports.PriorityQueue = PriorityQueue_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Priority;\n(function (Priority) {\n    Priority[Priority[\"LOW\"] = 0] = \"LOW\";\n    Priority[Priority[\"MEDIUM\"] = 5] = \"MEDIUM\";\n    Priority[Priority[\"HIGH\"] = 9] = \"HIGH\";\n})(Priority || (Priority = {}));\nexports.default = Priority;\n//# sourceMappingURL=Priority.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Priority_1 = require(\"./Priority\");\nvar Item = (function () {\n    function Item() {\n        this.fn = function () { };\n        this.priority = Priority_1.default.MEDIUM;\n        this.reject = function () { };\n        this.resolve = function () { };\n        this.retry = Infinity;\n        this.timestamp = 0;\n    }\n    return Item;\n}());\nexports.default = Item;\n//# sourceMappingURL=Item.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Item_1 = require(\"./Item\");\nvar Priority_1 = require(\"./Priority\");\nvar PriorityQueue = (function () {\n    function PriorityQueue(config) {\n        this.config = {\n            comparator: function (a, b) {\n                if (a.priority === b.priority) {\n                    return a.timestamp - b.timestamp;\n                }\n                return b.priority - a.priority;\n            },\n            maxRetries: Infinity,\n            retryDelay: 1000,\n        };\n        this.isPending = false;\n        this.queue = [];\n        this.config = __assign({}, this.config, config);\n    }\n    PriorityQueue.prototype.add = function (thunkedPromise, priority, label) {\n        var _this = this;\n        if (priority === void 0) { priority = Priority_1.default.MEDIUM; }\n        if (typeof thunkedPromise !== 'function') {\n            thunkedPromise = function () { return thunkedPromise; };\n        }\n        return new Promise(function (resolve, reject) {\n            var queueObject = new Item_1.default();\n            queueObject.fn = thunkedPromise;\n            queueObject.label = label;\n            queueObject.priority = priority;\n            queueObject.reject = reject;\n            queueObject.resolve = resolve;\n            queueObject.retry = Number(_this.config.maxRetries) >= 0 ? Number(_this.config.maxRetries) : queueObject.retry;\n            queueObject.timestamp = Date.now() + _this.size;\n            _this.queue.push(queueObject);\n            _this.queue.sort(_this.config.comparator);\n            _this.run();\n        });\n    };\n    PriorityQueue.prototype.delete = function (label) {\n        this.queue = this.queue.filter(function (item) { return item.label !== label; });\n    };\n    PriorityQueue.prototype.deleteAll = function () {\n        this.queue = [];\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"all\", {\n        get: function () {\n            return this.queue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"first\", {\n        get: function () {\n            return this.queue[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"last\", {\n        get: function () {\n            return this.queue[this.queue.length - 1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"size\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PriorityQueue.prototype.resolveItems = function () {\n        var _this = this;\n        var queueObject = this.first;\n        if (!queueObject) {\n            return;\n        }\n        Promise.resolve(queueObject.fn())\n            .then(function (result) {\n            return { shouldContinue: true, wrappedResolve: function () { return queueObject.resolve(result); } };\n        })\n            .catch(function (error) {\n            if (queueObject.retry > 0) {\n                queueObject.retry -= 1;\n                setTimeout(function () { return _this.resolveItems(); }, _this.config.retryDelay || 1000);\n                return { shouldContinue: false };\n            }\n            else {\n                queueObject.reject(error);\n                return { shouldContinue: true };\n            }\n        })\n            .then(function (_a) {\n            var shouldContinue = _a.shouldContinue, wrappedResolve = _a.wrappedResolve;\n            if (shouldContinue) {\n                if (wrappedResolve) {\n                    wrappedResolve();\n                }\n                _this.isPending = false;\n                var nextItem = _this.queue.shift();\n                if (nextItem) {\n                    _this.resolveItems();\n                }\n            }\n        });\n    };\n    PriorityQueue.prototype.run = function () {\n        if (!this.isPending && this.first) {\n            this.isPending = true;\n            this.resolveItems();\n        }\n    };\n    PriorityQueue.prototype.toString = function () {\n        return this.queue\n            .map(function (item, index) {\n            return \"\\\"\" + index + \"\\\": \" + item.fn.toString().replace(/(\\r\\n|\\n|\\r|\\s+)/gm, '');\n        })\n            .join('\\r\\n');\n    };\n    return PriorityQueue;\n}());\nexports.default = PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map"],"sourceRoot":""}