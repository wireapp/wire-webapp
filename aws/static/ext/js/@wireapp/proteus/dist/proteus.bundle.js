/*! @wireapp/proteus v8.0.12 */
var Proteus=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=34)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={new_instance:function(e){try{return new e}catch(e){return e._instance}}}},function(e,t){e.exports=sodium},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(r,n){void 0===r&&(r="Invalid input"),void 0===n&&(n=4);var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t.CODE={CASE_400:400,CASE_401:401,CASE_402:402,CASE_403:403,CASE_404:404,CASE_405:405,CASE_406:406,CASE_407:407,CASE_408:408,CASE_409:409},t}(r(4).default);!function(e){var t=function(e){function t(r,n){void 0===r&&(r="Invalid array length");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.RangeError=t;var r=function(e){function t(r,n){void 0===r&&(r="Invalid type");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.TypeError=r;var i=function(e){function t(r,n){void 0===r&&(r="Conversion error");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.ConversionError=i}(i||(i={})),t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=r(1),o=r(2),a=r(0),u=function(){function e(){this.pub_edward=new Uint8Array([]),this.pub_curve=new Uint8Array([])}return e.new=function(t,r){var n=a.default.new_instance(e);return n.pub_edward=t,n.pub_curve=r,n},e.prototype.verify=function(e,t){return i.crypto_sign_verify_detached(e,t,this.pub_edward)},e.prototype.fingerprint=function(){return i.to_hex(this.pub_edward)},e.prototype.encode=function(e){return e.object(1),e.u8(0),e.bytes(this.pub_edward)},e.decode=function(t){for(var r=a.default.new_instance(e),i=t.object(),u=0;u<=i-1;u++)switch(t.u8()){case 0:r.pub_edward=new Uint8Array(t.bytes());break;default:t.skip()}var s=n.convertPublicKey(r.pub_edward);if(s)return r.pub_curve=s,r;throw new o.default.ConversionError("Could not convert private key with ed2curve.",409)},e}();t.default=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(r,n){void 0===n&&(n=1);var i=e.call(this,r)||this;return i.message=r,i.code=n,Object.setPrototypeOf(i,t.prototype),i.code=n,i.message=r,i.name=i.constructor.name,i}return n(t,e),t.CODE={CASE_100:100,CASE_101:101,CASE_102:102,CASE_103:103,CASE_104:104},t}(Error);t.default=i},function(e,t){e.exports=CBOR},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),a=r(1),u=r(0),s=r(3),c=r(20),f=r(2),l=function(){function e(){this.public_key=new s.default,this.secret_key=new c.default}return e.new=function(){return n(this,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return[4,a.ready];case 1:return n.sent(),t=a.crypto_sign_keypair(),(r=u.default.new_instance(e)).secret_key=e.prototype._construct_private_key(t),r.public_key=e.prototype._construct_public_key(t),[2,r]}})})},e.prototype._construct_private_key=function(e){var t=e.privateKey,r=o.convertSecretKey(t);if(r)return c.default.new(t,r);throw new f.default.ConversionError("Could not convert private key with ed2curve.",409)},e.prototype._construct_public_key=function(e){var t=e.publicKey,r=o.convertPublicKey(t);if(r)return s.default.new(t,r);throw new f.default.ConversionError("Could not convert public key with ed2curve.",408)},e.prototype.encode=function(e){return e.object(2),e.u8(0),this.secret_key.encode(e),e.u8(1),this.public_key.encode(e)},e.decode=function(t){for(var r=u.default.new_instance(e),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r.secret_key=c.default.decode(t);break;case 1:r.public_key=s.default.decode(t);break;default:t.skip()}return r},e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i={zeroize:function(e){var t=this;if(e instanceof Uint8Array)n.memzero(e);else if(e instanceof ArrayBuffer)n.memzero(new Uint8Array(e));else{if("object"!=typeof e)return;Object.keys(e).map(function(t){return e[t]}).forEach(function(e){return t.zeroize(e)})}}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),o=function(){function e(){this.public_key=new i.default}return e.new=function(t){var r=n.default.new_instance(e);return r.public_key=t,r},e.prototype.fingerprint=function(){return this.public_key.fingerprint()},e.prototype.encode=function(e){return e.object(1),e.u8(0),this.public_key.encode(e)},e.decode=function(t){for(var r=n.default.new_instance(i.default),o=t.object(),a=0;a<=o-1;a++)switch(t.u8()){case 0:r=i.default.decode(t);break;default:t.skip()}return e.new(r)},e}();t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(3),a=r(0),u=r(17),s=r(21),c=function(e){function t(){var t=e.call(this)||this;return t.cipher_text=new Uint8Array([]),t.counter=-1,t.prev_counter=-1,t.ratchet_key=new o.default,t.session_tag=new s.default,t}return n(t,e),t.new=function(e,r,n,i,o){var u=a.default.new_instance(t);return u.session_tag=e,u.counter=r,u.prev_counter=n,u.ratchet_key=i,u.cipher_text=o,Object.freeze(u),u},t.prototype.encode=function(e){return e.object(5),e.u8(0),this.session_tag.encode(e),e.u8(1),e.u32(this.counter),e.u8(2),e.u32(this.prev_counter),e.u8(3),this.ratchet_key.encode(e),e.u8(4),e.bytes(this.cipher_text)},t.decode=function(e){for(var r=null,n=null,a=null,u=null,c=null,f=e.object(),l=0;l<=f-1;l++)switch(e.u8()){case 0:r=s.default.decode(e);break;case 1:n=e.u32();break;case 2:a=e.u32();break;case 3:u=o.default.decode(e);break;case 4:c=new Uint8Array(e.bytes());break;default:e.skip()}if(n=Number(n),a=Number(a),r&&!isNaN(n)&&!isNaN(a)&&u&&c)return t.new(r,n,a,u,c);throw new i.default.TypeError("Given CipherMessage doesn't match expected signature.",i.default.CODE.CASE_405)},t}(u.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(14),o=r(0),a=r(22),u=function(){function e(){this.idx=-1,this.key=new i.default(new Uint8Array([]))}return e.from_mac_key=function(t,r){var n=o.default.new_instance(e);return n.key=t,n.idx=r,n},e.prototype.next=function(){var t=o.default.new_instance(e);return t.key=new i.default(this.key.sign("1")),t.idx=this.idx+1,t},e.prototype.message_keys=function(){var e=this.key.sign("0"),t=n.default.kdf_without_salt(e,"hash_ratchet");return a.default.new(t.cipher_key,t.mac_key,this.idx)},e.prototype.encode=function(e){return e.object(2),e.u8(0),this.key.encode(e),e.u8(1),e.u32(this.idx)},e.decode=function(t){for(var r=o.default.new_instance(e),n=t.object(),a=0;a<=n-1;a++)switch(t.u8()){case 0:r.key=i.default.decode(t);break;case 1:r.idx=t.u32();break;default:t.skip()}return r},e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=function(){function e(){this.key=new Uint8Array([])}return e.new=function(t){var r=i.default.new_instance(e);return r.key=t,r},e.prototype.encrypt=function(e,t){return e instanceof ArrayBuffer&&void 0!==e.byteLength&&(e=new Uint8Array(e)),n.crypto_stream_chacha20_xor(e,t,this.key,"uint8array")},e.prototype.decrypt=function(e,t){return this.encrypt(e,t)},e.prototype.encode=function(e){return e.object(1),e.u8(0),e.bytes(this.key)},e.decode=function(t){for(var r=new Uint8Array([]),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r=new Uint8Array(t.bytes());break;default:t.skip()}return e.new(r)},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(23),o=r(7),a=r(11),u=r(14),s=function(){function e(){this.cipher_key=new a.default,this.mac_key=new u.default(new Uint8Array([]))}return e.kdf=function(t,r,s){var c=i.default.hkdf(r,t,s,64),f=new Uint8Array(c.buffer.slice(0,32)),l=new Uint8Array(c.buffer.slice(32,64));o.default.zeroize(c.buffer);var d=n.default.new_instance(e);return d.cipher_key=a.default.new(f),d.mac_key=new u.default(l),d},e.kdf_without_salt=function(e,t){return this.kdf(e,new Uint8Array(0),t)},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i={assert_is_not_zeros:function(e){var t=!0;for(var r in e)if(parseInt(r)>0){t=!1;break}if(!0===t)throw new n.default("Array consists only of zeroes.",n.default.CODE.CASE_100)},concatenate_array_buffers:function(e){return e.reduce(function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r})}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e){this.key=e}return e.prototype.sign=function(e){return n.crypto_auth_hmacsha256(e,this.key)},e.prototype.verify=function(e,t){return n.crypto_auth_hmacsha256_verify(e,t,this.key)},e.prototype.encode=function(e){return e.object(1),e.u8(0),e.bytes(this.key)},e.decode=function(t){for(var r=new Uint8Array([]),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r=new Uint8Array(t.bytes());break;default:t.skip()}return new e(r)},e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(r,n){void 0===r&&(r="Unknown decoding error"),void 0===n&&(n=3);var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t.CODE={CASE_300:300,CASE_301:301,CASE_302:302,CASE_303:303},t}(r(4).default);!function(e){var t=function(e){function t(r,n){void 0===r&&(r="Invalid type");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.InvalidType=t;var r=function(e){function t(r,n){void 0===r&&(r="Invalid array length");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.InvalidArrayLen=r;var i=function(e){function t(r,n){void 0===r&&(r="Local identity changed");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.LocalIdentityChanged=i}(i||(i={})),t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(r,n){void 0===r&&(r="Unknown decryption error"),void 0===n&&(n=2);var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t.CODE={CASE_200:200,CASE_201:201,CASE_202:202,CASE_203:203,CASE_204:204,CASE_205:205,CASE_206:206,CASE_207:207,CASE_208:208,CASE_209:209,CASE_210:210,CASE_211:211,CASE_212:212,CASE_213:213},t}(r(4).default);!function(e){var t=function(t){function r(n,i){void 0===n&&(n="Duplicate message"),void 0===i&&(i=e.CODE.CASE_209);var o=t.call(this,n,i)||this;return Object.setPrototypeOf(o,r.prototype),o}return n(r,t),r}(e);e.DuplicateMessage=t;var r=function(e){function t(r,n){void 0===r&&(r="Invalid message");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.InvalidMessage=r;var i=function(e){function t(r,n){void 0===r&&(r="Invalid signature");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.InvalidSignature=i;var o=function(t){function r(n,i){void 0===n&&(n="Outdated message"),void 0===i&&(i=e.CODE.CASE_208);var o=t.call(this,n,i)||this;return Object.setPrototypeOf(o,r.prototype),o}return n(r,t),r}(e);e.OutdatedMessage=o;var a=function(e){function t(r,n){void 0===r&&(r="Pre-key not found");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.PrekeyNotFound=a;var u=function(e){function t(r,n){void 0===r&&(r="Remote identity changed");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.RemoteIdentityChanged=u;var s=function(t){function r(n,i){void 0===n&&(n="Sending client failed to encrypt the message"),void 0===i&&(i=e.CODE.CASE_213);var o=t.call(this,n,i)||this;return Object.setPrototypeOf(o,r.prototype),o}return n(r,t),r}(e);e.RemoteEncryptionError=s;var c=function(e){function t(r,n){void 0===r&&(r="Message is from too distant in the future");var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return n(t,e),t}(e);e.TooDistantFuture=c}(i||(i={})),t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(15),o=function(){function e(){}return e.prototype.serialise=function(){var e=new n.Encoder;if(this instanceof a.default)e.u8(1);else{if(!(this instanceof u.default))throw new TypeError("Unexpected message type");e.u8(2)}return this.encode(e),e.get_buffer()},e.deserialise=function(e){var t=new n.Decoder(e);switch(t.u8()){case 1:return a.default.decode(t);case 2:return u.default.decode(t);default:throw new i.default.InvalidType("Unrecognised message type",i.default.CODE.CASE_302)}},e}();t.default=o;var a=r(9),u=r(18)},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),o=r(3),a=r(0),u=r(2),s=r(9),c=function(e){function t(){var t=e.call(this)||this;return t.base_key=new o.default,t.identity_key=new i.default,t.message=new s.default,t.prekey_id=-1,t}return n(t,e),t.new=function(e,r,n,i){var o=a.default.new_instance(t);return o.prekey_id=e,o.base_key=r,o.identity_key=n,o.message=i,Object.freeze(o),o},t.prototype.encode=function(e){return e.object(4),e.u8(0),e.u16(this.prekey_id),e.u8(1),this.base_key.encode(e),e.u8(2),this.identity_key.encode(e),e.u8(3),this.message.encode(e)},t.decode=function(e){for(var r=null,n=null,a=null,c=null,f=e.object(),l=0;l<=f-1;l++)switch(e.u8()){case 0:r=e.u16();break;case 1:n=o.default.decode(e);break;case 2:a=i.default.decode(e);break;case 3:c=s.default.decode(e);break;default:e.skip()}if(r=Number(r),!isNaN(r)&&n&&a&&c)return t.new(r,n,a,c);throw new u.default.TypeError("Given PreKeyMessage doesn't match expected signature.",u.default.CODE.CASE_406)},t}(r(17).default);t.default=c},function(e,t,r){!function(t,n){"use strict";e.exports?e.exports=n(r(38)):t.ed2curve=n(t.nacl)}(this,function(e){"use strict";if(!e)throw new Error("tweetnacl not loaded");var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=t(),n=t([1]),i=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),o=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function a(e){var t,r;for(r=0;r<16;r++)e[r]+=65536,t=Math.floor(e[r]/65536),e[(r+1)*(r<15?1:0)]+=t-1+37*(t-1)*(15===r?1:0),e[r]-=65536*t}function u(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function s(e,t,r){var n;for(n=0;n<16;n++)e[n]=t[n]+r[n]|0}function c(e,t,r){var n;for(n=0;n<16;n++)e[n]=t[n]-r[n]|0}function f(e,t,r){var n,i,o=new Float64Array(31);for(n=0;n<31;n++)o[n]=0;for(n=0;n<16;n++)for(i=0;i<16;i++)o[n+i]+=t[n]*r[i];for(n=0;n<15;n++)o[n]+=38*o[n+16];for(n=0;n<16;n++)e[n]=o[n];a(e),a(e)}function l(e,t){f(e,t,t)}function d(e,r){var n,i,o,s=t(),c=t();for(n=0;n<16;n++)c[n]=r[n];for(a(c),a(c),a(c),i=0;i<2;i++){for(s[0]=c[0]-65517,n=1;n<15;n++)s[n]=c[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=c[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,u(c,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&c[n],e[2*n+1]=c[n]>>8}function h(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return d(r,e),d(n,t),function(e,t,r,n){return function(e,t,r,n,i){var o,a=0;for(o=0;o<i;o++)a|=e[t+o]^r[n+o];return(1&a-1>>>8)-1}(e,t,r,n,32)}(r,0,n,0)}function y(e,a){var u=t(),y=t(),_=t(),p=t(),v=t(),w=t(),b=t();return function(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}(e[2],n),function(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(e[1],a),l(_,e[1]),f(p,_,i),c(_,_,e[2]),s(p,e[2],p),l(v,p),l(w,v),f(b,w,v),f(u,b,_),f(u,u,p),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)l(i,i),1!==n&&f(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(u,u),f(u,u,_),f(u,u,p),f(u,u,p),f(e[0],u,p),l(y,e[0]),f(y,y,p),h(y,_)&&f(e[0],e[0],o),l(y,e[0]),f(y,y,p),h(y,_)?-1:(function(e){var t=new Uint8Array(32);return d(t,e),1&t[0]}(e[0])===a[31]>>7&&c(e[0],r,e[0]),f(e[3],e[0],e[1]),0)}function _(e){var r=new Uint8Array(32),i=[t(),t(),t(),t()],o=t(),a=t();if(y(i,e))return null;var u=i[1];return s(o,n,u),c(a,n,u),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)l(i,i),2!==n&&4!==n&&f(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(a,a),f(o,o,a),d(r,o),r}function p(t){var r,n=new Uint8Array(64),i=new Uint8Array(32);for(e.lowlevel.crypto_hash(n,t,32),n[0]&=248,n[31]&=127,n[31]|=64,r=0;r<32;r++)i[r]=n[r];for(r=0;r<64;r++)n[r]=0;return i}return{convertPublicKey:_,convertSecretKey:p,convertKeyPair:function(e){var t=_(e.publicKey);return t?{publicKey:t,secretKey:p(e.secretKey)}:null}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=r(1),o=r(0),a=r(2),u=r(13),s=function(){function e(){this.sec_curve=new Uint8Array([]),this.sec_edward=new Uint8Array([])}return e.new=function(t,r){var n=o.default.new_instance(e);return n.sec_edward=t,n.sec_curve=r,n},e.prototype.sign=function(e){return i.crypto_sign_detached(e,this.sec_edward)},e.prototype.shared_secret=function(e){var t=i.crypto_scalarmult(this.sec_curve,e.pub_curve);return u.default.assert_is_not_zeros(t),t},e.prototype.encode=function(e){return e.object(1),e.u8(0),e.bytes(this.sec_edward)},e.decode=function(t){for(var r=o.default.new_instance(e),i=t.object(),u=0;u<=i-1;u++)switch(t.u8()){case 0:r.sec_edward=new Uint8Array(t.bytes());break;default:t.skip()}var s=n.convertSecretKey(r.sec_edward);if(s)return r.sec_curve=s,r;throw new a.default.ConversionError("Could not convert public key with ed2curve.",408)},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(15),o=r(0),a=r(27),u=function(){function e(){this.tag=new Uint8Array([])}return e.new=function(){var t=o.default.new_instance(e);return t.tag=a.default.random_bytes(16),t},e.prototype.toString=function(){return n.to_hex(this.tag)},e.prototype.encode=function(e){return e.bytes(this.tag)},e.decode=function(t){var r=new Uint8Array(t.bytes());if(16!==r.byteLength)throw new i.default.InvalidArrayLen("Session tag should be 16 bytes, not "+r.byteLength+" bytes.",i.default.CODE.CASE_303);var n=o.default.new_instance(e);return n.tag=new Uint8Array(r),n},e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(14),o=r(0),a=function(){function e(){this.cipher_key=new n.default,this.counter=-1,this.mac_key=new i.default(new Uint8Array([]))}return e.new=function(t,r,n){var i=o.default.new_instance(e);return i.cipher_key=t,i.mac_key=r,i.counter=n,i},e.prototype._counter_as_nonce=function(){var e=new ArrayBuffer(8);return new DataView(e).setUint32(0,this.counter),new Uint8Array(e)},e.prototype.encrypt=function(e){return this.cipher_key.encrypt(e,this._counter_as_nonce())},e.prototype.decrypt=function(e){return this.cipher_key.decrypt(e,this._counter_as_nonce())},e.prototype.encode=function(e){return e.object(3),e.u8(0),this.cipher_key.encode(e),e.u8(1),this.mac_key.encode(e),e.u8(2),e.u32(this.counter)},e.decode=function(t){for(var r=o.default.new_instance(e),a=t.object(),u=0;u<=a-1;u++)switch(t.u8()){case 0:r.cipher_key=n.default.decode(t);break;case 1:r.mac_key=i.default.decode(t);break;case 2:r.counter=t.u32();break;default:t.skip()}return r},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(13),o=r(7),a={hkdf:function(e,t,r,a){var u=function(e){return"string"==typeof e?n.from_string(e):e};e=u(e),t=u(t),r=u(r);var s=function(e,t){return n.crypto_auth_hmacsha256(t,function(e){var t=n.crypto_auth_hmacsha256_KEYBYTES;if(e.length>t)return n.crypto_hash_sha256(e);var r=new Uint8Array(t);return r.set(e),r}(e))}(e,t);return o.default.zeroize(t),o.default.zeroize(e),function(e,t,r){for(var o=Math.ceil(r/32),a=new Uint8Array(0),u=new Uint8Array(0),s=0;s<=o-1;s++){var c=i.default.concatenate_array_buffers([a,t,new Uint8Array([s+1])]);a=n.crypto_auth_hmacsha256(c,e),u=i.default.concatenate_array_buffers([u,a])}return new Uint8Array(u.buffer.slice(0,r))}(s,r,a)}};t.default=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),a=r(0),u=r(8),s=r(6),c=r(20),f=function(){function e(){this.public_key=new u.default,this.secret_key=new c.default,this.version=-1}return e.new=function(){return n(this,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return[4,s.default.new()];case 1:return t=n.sent(),(r=a.default.new_instance(e)).version=1,r.secret_key=t.secret_key,r.public_key=u.default.new(t.public_key),[2,r]}})})},e.prototype.serialise=function(){var e=new o.Encoder;return this.encode(e),e.get_buffer()},e.deserialise=function(t){var r=new o.Decoder(t);return e.decode(r)},e.prototype.encode=function(e){return e.object(3),e.u8(0),e.u8(this.version),e.u8(1),this.secret_key.encode(e),e.u8(2),this.public_key.encode(e)},e.decode=function(t){for(var r=a.default.new_instance(e),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r.version=t.u8();break;case 1:r.secret_key=c.default.decode(t);break;case 2:r.public_key=u.default.decode(t);break;default:t.skip()}return r},e}();t.default=f},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),a=r(0),u=r(2),s=r(6),c=function(){function e(){this.key_id=-1,this.key_pair=new s.default,this.version=-1}return e.new=function(t){return n(this,void 0,void 0,function(){var r,n;return i(this,function(i){switch(i.label){case 0:return this.validate_pre_key_id(t),(r=a.default.new_instance(e)).version=1,r.key_id=t,n=r,[4,s.default.new()];case 1:return n.key_pair=i.sent(),[2,r]}})})},e.validate_pre_key_id=function(t){if(void 0===t)throw new u.default.TypeError("PreKey ID is undefined.",u.default.CODE.CASE_404);if("string"==typeof t)throw new u.default.TypeError('PreKey ID "'+t+'" is a string.',u.default.CODE.CASE_403);if(t%1!=0)throw new u.default.TypeError('PreKey ID "'+t+'" is a floating-point number.',u.default.CODE.CASE_403);if(t<0||t>e.MAX_PREKEY_ID){var r="PreKey ID ("+t+") must be between or equal to 0 and "+e.MAX_PREKEY_ID+".";throw new u.default.RangeError(r,u.default.CODE.CASE_400)}},e.last_resort=function(){return e.new(e.MAX_PREKEY_ID)},e.generate_prekeys=function(t,r){return n(this,void 0,void 0,function(){var o=this;return i(this,function(a){return this.validate_pre_key_id(t),this.validate_pre_key_id(r),0===r?[2,[]]:[2,Promise.all(new Array(r).fill(null).map(function(r,a){return n(o,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,e.new((t+a)%e.MAX_PREKEY_ID)];case 1:return[2,r.sent()]}})})}))]})})},e.prototype.serialise=function(){var e=new o.Encoder;return this.encode(e),e.get_buffer()},e.deserialise=function(t){return e.decode(new o.Decoder(t))},e.prototype.encode=function(e){return e.object(3),e.u8(0),e.u8(this.version),e.u8(1),e.u16(this.key_id),e.u8(2),this.key_pair.encode(e)},e.decode=function(t){for(var r=a.default.new_instance(e),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r.version=t.u8();break;case 1:r.key_id=t.u16();break;case 2:r.key_pair=s.default.decode(t);break;default:t.skip()}return r},e.MAX_PREKEY_ID=65535,e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.INVALID="Invalid",e.UNKNOWN="Unknown",e.VALID="Valid",e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={random_bytes:function(e){if("undefined"!=typeof window&&window.crypto){var t=new ArrayBuffer(e),n=new Uint8Array(t);return window.crypto.getRandomValues(n)}var i=r(42);return new Uint8Array(i.randomBytes(e))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(0),o=r(17),a=function(){function e(){this._message_enc=new Uint8Array([]),this.mac=new Uint8Array([]),this.message=new o.default,this.version=-1}return e.new=function(t,r){var n=new Uint8Array(r.serialise()),o=i.default.new_instance(e);return o.version=1,o.mac=t.sign(n),o.message=r,o._message_enc=n,Object.freeze(o),o},e.prototype.verify=function(e){return e.verify(this.mac,this._message_enc)},e.prototype.serialise=function(){var e=new n.Encoder;return this.encode(e),e.get_buffer()},e.deserialise=function(t){var r=new n.Decoder(t);return e.decode(r)},e.prototype.encode=function(e){return e.object(3),e.u8(0),e.u8(this.version),e.u8(1),e.object(1),e.u8(0),e.bytes(this.mac),e.u8(2),e.bytes(this._message_enc)},e.decode=function(t){for(var r=i.default.new_instance(e),n=t.object(),a=0;a<=n-1;a++)switch(t.u8()){case 0:r.version=t.u8();break;case 1:for(var u=t.object(),s=0;s<=u-1;s++)switch(t.u8()){case 0:r.mac=new Uint8Array(t.bytes());break;default:t.skip()}break;case 2:r._message_enc=new Uint8Array(t.bytes());break;default:t.skip()}return r.message=o.default.deserialise(r._message_enc.buffer),Object.freeze(r),r},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(0),o=r(16),a=r(4),u=r(10),s=r(22),c=function(){function e(){this.chain_key=new u.default,this.message_keys=[],this.ratchet_key=new n.default}return e.new=function(t,r){var n=i.default.new_instance(e);return n.chain_key=t,n.ratchet_key=r,n.message_keys=[],n},e.prototype.try_message_keys=function(e,t){if(this.message_keys[0]&&this.message_keys[0].counter>t.counter){var r="Message too old. Counter for oldest staged chain key is '"+this.message_keys[0].counter+"' while message counter is '"+t.counter+"'.";throw new o.default.OutdatedMessage(r,o.default.CODE.CASE_208)}var n=this.message_keys.findIndex(function(e){return e.counter===t.counter});if(-1===n)throw new o.default.DuplicateMessage(void 0,o.default.CODE.CASE_209);var i=this.message_keys.splice(n,1)[0];if(!e.verify(i.mac_key)){r="Envelope verification failed for message with counter behind. Message index is '"+t.counter+"' while receive chain index is '"+this.chain_key.idx+"'.";throw new o.default.InvalidSignature(r,o.default.CODE.CASE_210)}return i.decrypt(t.cipher_text)},e.prototype.stage_message_keys=function(t){var r=t.counter-this.chain_key.idx;if(r>e.MAX_COUNTER_GAP){if(0===this.chain_key.idx)throw new o.default.TooDistantFuture("Skipped too many message at the beginning of a receive chain.",o.default.CODE.CASE_211);throw new o.default.TooDistantFuture("Skipped too many message within a used receive chain. Receive chain counter is '"+this.chain_key.idx+"'",o.default.CODE.CASE_212)}for(var n=[],i=this.chain_key,a=0;a<=r-1;a++)n.push(i.message_keys()),i=i.next();return[i,i.message_keys(),n]},e.prototype.commit_message_keys=function(t){var r=this;if(t.length>e.MAX_COUNTER_GAP)throw new a.default("Number of message keys ("+t.length+") exceed message chain counter gap ("+e.MAX_COUNTER_GAP+").",a.default.CODE.CASE_103);for(var n=this.message_keys.length+t.length-e.MAX_COUNTER_GAP,i=0;i<=n-1;i++)this.message_keys.shift();if(t.map(function(e){return r.message_keys.push(e)}),t.length>e.MAX_COUNTER_GAP)throw new a.default("Skipped message keys which exceed the message chain counter gap ("+e.MAX_COUNTER_GAP+").",a.default.CODE.CASE_104)},e.prototype.encode=function(e){return e.object(3),e.u8(0),this.chain_key.encode(e),e.u8(1),this.ratchet_key.encode(e),e.u8(2),e.array(this.message_keys.length),this.message_keys.map(function(t){return t.encode(e)})},e.decode=function(t){for(var r=i.default.new_instance(e),o=t.object(),a=0;a<=o-1;a++)switch(t.u8()){case 0:r.chain_key=u.default.decode(t);break;case 1:r.ratchet_key=n.default.decode(t);break;case 2:r.message_keys=[];for(var c=t.array();c--;)r.message_keys.push(s.default.decode(t));break;default:t.skip()}return r},e.MAX_COUNTER_GAP=1e3,e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(12),o=r(2),a=r(0),u=r(10),s=function(){function e(){this.key=new n.default}return e.from_cipher_key=function(t){var r=a.default.new_instance(e);return r.key=t,r},e.prototype.dh_ratchet=function(t,r){var n=t.secret_key.shared_secret(r),o=i.default.kdf(n,this.key.key,"dh_ratchet");return[e.from_cipher_key(o.cipher_key),u.default.from_mac_key(o.mac_key,0)]},e.prototype.encode=function(e){return e.object(1),e.u8(0),this.key.encode(e)},e.decode=function(t){for(var r=null,i=t.object(),a=0;a<=i-1;a++)switch(t.u8()){case 0:r=n.default.decode(t);break;default:t.skip()}if(r)return e.from_cipher_key(r);throw new o.default.TypeError("Given RootKey doesn't match expected signature.",o.default.CODE.CASE_407)},e}();t.RootKey=s,t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(0),o=r(10),a=function(){function e(){this.chain_key=new o.default,this.ratchet_key=new n.default}return e.new=function(t,r){var n=i.default.new_instance(e);return n.chain_key=t,n.ratchet_key=r,n},e.prototype.encode=function(e){return e.object(2),e.u8(0),this.chain_key.encode(e),e.u8(1),this.ratchet_key.encode(e)},e.decode=function(t){for(var r=i.default.new_instance(e),a=t.object(),u=0;u<=a-1;u++)switch(t.u8()){case 0:r.chain_key=o.default.decode(t);break;case 1:r.ratchet_key=n.default.decode(t);break;default:t.skip()}return r},e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),a=r(0),u=r(15),s=r(16),c=r(4),f=r(7),l=r(33),d=r(8),h=r(24),y=r(6),_=r(25),p=r(3),v=r(9),w=r(18),b=r(21),k=function(){function e(){this.counter=0,this.version=1,this.local_identity=new h.default,this.pending_prekey=null,this.remote_identity=new d.default,this.session_states={},this.session_tag=new b.default}return e.init_from_prekey=function(e,t){return n(this,void 0,void 0,function(){var r,n,o,u;return i(this,function(i){switch(i.label){case 0:return[4,y.default.new()];case 1:return r=i.sent(),[4,l.default.init_as_alice(e,r,t)];case 2:return n=i.sent(),o=b.default.new(),(u=a.default.new_instance(this)).session_tag=o,u.local_identity=e,u.remote_identity=t.identity_key,u.pending_prekey=[t.prekey_id,r.public_key],u.session_states={},u._insert_session_state(o,n),[2,u]}})})},e.init_from_message=function(t,r,o){var u=this;return new Promise(function(c,l){var d=function(){if(o.message instanceof v.default)throw new s.default.InvalidMessage("Can't initialise a session from a CipherMessage.",s.default.CODE.CASE_201);if(o.message instanceof w.default)return o.message;throw new s.default.InvalidMessage('Unknown message format: The message is neither a "CipherMessage" nor a "PreKeyMessage".',s.default.CODE.CASE_202)}(),h=a.default.new_instance(e);return h.session_tag=d.message.session_tag,h.local_identity=t,h.remote_identity=d.identity_key,h.pending_prekey=null,h.session_states={},h._new_state(r,d).then(function(e){return n(u,void 0,void 0,function(){var t,n,a;return i(this,function(i){switch(i.label){case 0:return[4,e.decrypt(o,d.message)];case 1:return t=i.sent(),h._insert_session_state(d.message.session_tag,e),d.prekey_id<_.default.MAX_PREKEY_ID?(a=(n=f.default).zeroize,[4,r.load_prekey(d.prekey_id)]):[3,3];case 2:return a.apply(n,[i.sent()]),[2,r.delete_prekey(d.prekey_id).then(function(){return c([h,t])}).catch(function(e){l(new s.default.PrekeyNotFound("Could not delete PreKey: "+e.message,s.default.CODE.CASE_203))})];case 3:return[2,c([h,t])]}})})}).catch(l)})},e.prototype._new_state=function(e,t){var r=this;return e.load_prekey(t.prekey_id).then(function(n){if(n)return l.default.init_as_bob(r.local_identity,n.key_pair,t.identity_key,t.base_key);throw new c.default('Unable to find PreKey ID "'+t.prekey_id+'" in PreKey store "'+e.constructor.name+'".',c.default.CODE.CASE_101)})},e.prototype._insert_session_state=function(t,r){this.session_states.hasOwnProperty(t.toString())?this.session_states[t.toString()].state=r:(this.counter>=Number.MAX_SAFE_INTEGER&&(this.session_states={},this.counter=0),this.session_states[t.toString()]={idx:this.counter,state:r,tag:t},this.counter++),this.session_tag.toString()!==t.toString()&&(this.session_tag=t);if(!(function(e){return Object.keys(e).length}(this.session_states)<e.MAX_SESSION_STATES))return this._evict_oldest_session_state()},e.prototype._evict_oldest_session_state=function(){var e=this,t=Object.keys(this.session_states).filter(function(t){return t.toString()!==e.session_tag.toString()}).reduce(function(t,r,n){return e.session_states[r].idx<e.session_states[t].idx?r.toString():t});f.default.zeroize(this.session_states[t]),delete this.session_states[t]},e.prototype.get_local_identity=function(){return this.local_identity.public_key},e.prototype.encrypt=function(e){var t=this;return new Promise(function(r,n){var i=t.session_states[t.session_tag.toString()];return i?r(i.state.encrypt(t.local_identity.public_key,t.pending_prekey,t.session_tag,e)):n(new c.default("Could not find session for tag '"+(t.session_tag||"").toString()+"'.",c.default.CODE.CASE_102))})},e.prototype.decrypt=function(e,t){var r=this;return new Promise(function(n){var i=t.message;if(i instanceof v.default)return n(r._decrypt_cipher_message(t,i));if(i instanceof w.default){var o=i.identity_key.fingerprint(),a=r.remote_identity.fingerprint();if(o!==a){var u="Fingerprints do not match: We expected '"+a+"', but received '"+o+"'.";throw new s.default.RemoteIdentityChanged(u,s.default.CODE.CASE_204)}return n(r._decrypt_prekey_message(t,i,e))}throw new s.default("Unknown message type.",s.default.CODE.CASE_200)})},e.prototype._decrypt_prekey_message=function(e,t,r){var o=this;return Promise.resolve().then(function(){return o._decrypt_cipher_message(e,t.message)}).catch(function(a){return n(o,void 0,void 0,function(){var o=this;return i(this,function(u){if(a instanceof s.default.InvalidSignature||a instanceof s.default.InvalidMessage)return[2,this._new_state(r,t).then(function(a){return n(o,void 0,void 0,function(){var n,o,u;return i(this,function(i){switch(i.label){case 0:return[4,a.decrypt(e,t.message)];case 1:return n=i.sent(),t.prekey_id===_.default.MAX_PREKEY_ID?[3,4]:(u=(o=f.default).zeroize,[4,r.load_prekey(t.prekey_id)]);case 2:return u.apply(o,[i.sent()]),[4,r.delete_prekey(t.prekey_id)];case 3:i.sent(),i.label=4;case 4:return this._insert_session_state(t.message.session_tag,a),this.pending_prekey=null,[2,n]}})})})];throw a})})})},e.prototype._decrypt_cipher_message=function(e,t){return n(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:if(!(r=this.session_states[t.session_tag.toString()]))throw new s.default.InvalidMessage("Local session not found for message session tag '"+t.session_tag+"'.",s.default.CODE.CASE_205);return[4,(n=l.default.deserialise(r.state.serialise())).decrypt(e,t)];case 1:return o=i.sent(),this.pending_prekey=null,this._insert_session_state(t.session_tag,n),[2,o]}})})},e.prototype.serialise=function(){var e=new o.Encoder;return this.encode(e),e.get_buffer()},e.deserialise=function(e,t){var r=new o.Decoder(t);return this.decode(e,r)},e.prototype.encode=function(e){for(var t in e.object(6),e.u8(0),e.u8(this.version),e.u8(1),this.session_tag.encode(e),e.u8(2),this.local_identity.public_key.encode(e),e.u8(3),this.remote_identity.encode(e),e.u8(4),this.pending_prekey?(e.object(2),e.u8(0),e.u16(this.pending_prekey[0]),e.u8(1),this.pending_prekey[1].encode(e)):e.null(),e.u8(5),e.object(Object.keys(this.session_states).length),this.session_states){var r=this.session_states[t];r.tag.encode(e),r.state.encode(e)}},e.decode=function(e,t){for(var r=a.default.new_instance(this),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r.version=t.u8();break;case 1:r.session_tag=b.default.decode(t);break;case 2:var o=d.default.decode(t);if(e.public_key.fingerprint()!==o.fingerprint())throw new u.default.LocalIdentityChanged(void 0,u.default.CODE.CASE_300);r.local_identity=e;break;case 3:r.remote_identity=d.default.decode(t);break;case 4:switch(t.optional(function(){return t.object()})){case null:r.pending_prekey=null;break;case 2:r.pending_prekey=[];for(var s=0;s<=1;++s)switch(t.u8()){case 0:r.pending_prekey[0]=t.u16();break;case 1:r.pending_prekey[1]=p.default.decode(t)}break;default:throw new u.default.InvalidType(void 0,u.default.CODE.CASE_301)}break;case 5:r.session_states={};for(var c=t.object(),f=0;f<=c-1;f++){var h=b.default.decode(t);r.session_states[h.toString()]={idx:f,state:l.default.decode(t),tag:h}}break;default:t.skip()}return r},e.MAX_RECV_CHAINS=5,e.MAX_SESSION_STATES=100,e}();t.Session=k,t.default=k},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),a=r(13),u=r(0),s=r(16),c=r(7),f=r(12),l=r(6),d=r(9),h=r(28),y=r(18),_=r(10),p=r(29),v=r(30),w=r(31),b=r(32),k=function(){function e(){this.prev_counter=-1,this.recv_chains=[],this.root_key=new v.default,this.send_chain=new w.default}return e.init_as_alice=function(t,r,o){return n(this,void 0,void 0,function(){var n,s,d,h,y,b,k,g,A,E,m;return i(this,function(i){switch(i.label){case 0:return n=a.default.concatenate_array_buffers([t.secret_key.shared_secret(o.public_key),r.secret_key.shared_secret(o.identity_key.public_key),r.secret_key.shared_secret(o.public_key)]),s=f.default.kdf_without_salt(n,"handshake"),c.default.zeroize(n),d=v.default.from_cipher_key(s.cipher_key),h=_.default.from_mac_key(s.mac_key,0),y=[p.default.new(h,o.public_key)],[4,l.default.new()];case 1:return b=i.sent(),k=d.dh_ratchet(b,o.public_key),g=k[0],A=k[1],E=w.default.new(A,b),(m=u.default.new_instance(e)).recv_chains=y,m.send_chain=E,m.root_key=g,m.prev_counter=0,[2,m]}})})},e.init_as_bob=function(t,r,n,i){var o=a.default.concatenate_array_buffers([r.secret_key.shared_secret(n.public_key),t.secret_key.shared_secret(i),r.secret_key.shared_secret(i)]),s=f.default.kdf_without_salt(o,"handshake");c.default.zeroize(o);var l=v.default.from_cipher_key(s.cipher_key),d=_.default.from_mac_key(s.mac_key,0),h=w.default.new(d,r),y=u.default.new_instance(e);return y.recv_chains=[],y.send_chain=h,y.root_key=l,y.prev_counter=0,y},e.prototype.ratchet=function(e){return n(this,void 0,void 0,function(){var t,r,n,o,a,u,s,f,d,h;return i(this,function(i){switch(i.label){case 0:return[4,l.default.new()];case 1:if(t=i.sent(),r=this.root_key.dh_ratchet(this.send_chain.ratchet_key,e),n=r[0],o=r[1],a=n.dh_ratchet(t,e),u=a[0],s=a[1],f=p.default.new(o,e),d=w.default.new(s,t),this.root_key=u,this.prev_counter=this.send_chain.chain_key.idx,this.send_chain=d,this.recv_chains.unshift(f),this.recv_chains.length>b.default.MAX_RECV_CHAINS){for(h=b.default.MAX_RECV_CHAINS;h<this.recv_chains.length;h++)c.default.zeroize(this.recv_chains[h]);this.recv_chains=this.recv_chains.slice(0,b.default.MAX_RECV_CHAINS)}return[2]}})})},e.prototype.encrypt=function(e,t,r,n){var i=this.send_chain.chain_key.message_keys(),o=d.default.new(r,this.send_chain.chain_key.idx,this.prev_counter,this.send_chain.ratchet_key.public_key,i.encrypt(n));t&&(o=y.default.new(t[0],t[1],e,o));var a=h.default.new(i.mac_key,o);return this.send_chain.chain_key=this.send_chain.chain_key.next(),a},e.prototype.decrypt=function(e,t){return n(this,void 0,void 0,function(){var r,n,o,a,u,c,f;return i(this,function(i){switch(i.label){case 0:return-1!==(r=this.recv_chains.findIndex(function(e){return e.ratchet_key.fingerprint()===t.ratchet_key.fingerprint()}))?[3,2]:[4,this.ratchet(t.ratchet_key)];case 1:i.sent(),r=0,i.label=2;case 2:if(n=this.recv_chains[r],t.counter<n.chain_key.idx)return[2,n.try_message_keys(e,t)];if(t.counter==n.chain_key.idx){if(c=n.chain_key.message_keys(),!e.verify(c.mac_key))throw new s.default.InvalidSignature("Envelope verification failed for message with counters in sync at '"+t.counter+"'. The received message was possibly encrypted for another client.",s.default.CODE.CASE_206);return f=c.decrypt(t.cipher_text),n.chain_key=n.chain_key.next(),[2,f]}if(o=n.stage_message_keys(t),a=o[0],u=o[1],c=o[2],!e.verify(u.mac_key))throw new s.default.InvalidSignature("Envelope verification failed for message with counter ahead. Message index is '"+t.counter+"' while receive chain index is '"+n.chain_key.idx+"'.",s.default.CODE.CASE_207);return f=u.decrypt(t.cipher_text),n.chain_key=a.next(),n.commit_message_keys(c),[2,f]}})})},e.prototype.serialise=function(){var e=new o.Encoder;return this.encode(e),e.get_buffer()},e.deserialise=function(t){return e.decode(new o.Decoder(t))},e.prototype.encode=function(e){return e.object(4),e.u8(0),e.array(this.recv_chains.length),this.recv_chains.map(function(t){return t.encode(e)}),e.u8(1),this.send_chain.encode(e),e.u8(2),this.root_key.encode(e),e.u8(3),e.u32(this.prev_counter)},e.decode=function(t){for(var r=u.default.new_instance(e),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r.recv_chains=[];for(var o=t.array();o--;)r.recv_chains.push(p.default.decode(t));break;case 1:r.send_chain=w.default.decode(t);break;case 2:r.root_key=v.default.decode(t);break;case 3:r.prev_counter=t.u32();break;default:t.skip()}return r},e}();t.default=k},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(35);t.derived=n;var i=r(36);t.errors=i;var o=r(37);t.keys=o;var a=r(41);t.message=a;var u=r(43);t.session=u;var s=r(45);t.util=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11);t.CipherKey=n.default;var i=r(12);t.DerivedSecrets=i.default;var o=r(14);t.MacKey=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15);t.DecodeError=n.default;var i=r(16);t.DecryptError=i.default;var o=r(2);t.InputError=o.default;var a=r(4);t.ProteusError=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);t.IdentityKey=n.default;var i=r(24);t.IdentityKeyPair=i.default;var o=r(6);t.KeyPair=o.default;var a=r(25);t.PreKey=a.default;var u=r(26);t.PreKeyAuth=u.default;var s=r(40);t.PreKeyBundle=s.default;var c=r(3);t.PublicKey=c.default;var f=r(20);t.SecretKey=f.default},function(e,t,r){!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=t(),u=t([1]),s=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function _(e,t,r,n,i){var o,a=0;for(o=0;o<i;o++)a|=e[t+o]^r[n+o];return(1&a-1>>>8)-1}function p(e,t,r,n){return _(e,t,r,n,16)}function v(e,t,r,n){return _(e,t,r,n,32)}function w(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,s=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,f=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,y=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,_=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,p=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,w=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,k=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,g=o,A=a,E=u,m=s,O=c,S=f,C=l,P=d,j=h,U=y,x=_,M=p,K=v,D=w,I=b,T=k,R=0;R<20;R+=2)g^=(i=(K^=(i=(j^=(i=(O^=(i=g+K|0)<<7|i>>>25)+g|0)<<9|i>>>23)+O|0)<<13|i>>>19)+j|0)<<18|i>>>14,S^=(i=(A^=(i=(D^=(i=(U^=(i=S+A|0)<<7|i>>>25)+S|0)<<9|i>>>23)+U|0)<<13|i>>>19)+D|0)<<18|i>>>14,x^=(i=(C^=(i=(E^=(i=(I^=(i=x+C|0)<<7|i>>>25)+x|0)<<9|i>>>23)+I|0)<<13|i>>>19)+E|0)<<18|i>>>14,T^=(i=(M^=(i=(P^=(i=(m^=(i=T+M|0)<<7|i>>>25)+T|0)<<9|i>>>23)+m|0)<<13|i>>>19)+P|0)<<18|i>>>14,g^=(i=(m^=(i=(E^=(i=(A^=(i=g+m|0)<<7|i>>>25)+g|0)<<9|i>>>23)+A|0)<<13|i>>>19)+E|0)<<18|i>>>14,S^=(i=(O^=(i=(P^=(i=(C^=(i=S+O|0)<<7|i>>>25)+S|0)<<9|i>>>23)+C|0)<<13|i>>>19)+P|0)<<18|i>>>14,x^=(i=(U^=(i=(j^=(i=(M^=(i=x+U|0)<<7|i>>>25)+x|0)<<9|i>>>23)+M|0)<<13|i>>>19)+j|0)<<18|i>>>14,T^=(i=(I^=(i=(D^=(i=(K^=(i=T+I|0)<<7|i>>>25)+T|0)<<9|i>>>23)+K|0)<<13|i>>>19)+D|0)<<18|i>>>14;g=g+o|0,A=A+a|0,E=E+u|0,m=m+s|0,O=O+c|0,S=S+f|0,C=C+l|0,P=P+d|0,j=j+h|0,U=U+y|0,x=x+_|0,M=M+p|0,K=K+v|0,D=D+w|0,I=I+b|0,T=T+k|0,e[0]=g>>>0&255,e[1]=g>>>8&255,e[2]=g>>>16&255,e[3]=g>>>24&255,e[4]=A>>>0&255,e[5]=A>>>8&255,e[6]=A>>>16&255,e[7]=A>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=m>>>0&255,e[13]=m>>>8&255,e[14]=m>>>16&255,e[15]=m>>>24&255,e[16]=O>>>0&255,e[17]=O>>>8&255,e[18]=O>>>16&255,e[19]=O>>>24&255,e[20]=S>>>0&255,e[21]=S>>>8&255,e[22]=S>>>16&255,e[23]=S>>>24&255,e[24]=C>>>0&255,e[25]=C>>>8&255,e[26]=C>>>16&255,e[27]=C>>>24&255,e[28]=P>>>0&255,e[29]=P>>>8&255,e[30]=P>>>16&255,e[31]=P>>>24&255,e[32]=j>>>0&255,e[33]=j>>>8&255,e[34]=j>>>16&255,e[35]=j>>>24&255,e[36]=U>>>0&255,e[37]=U>>>8&255,e[38]=U>>>16&255,e[39]=U>>>24&255,e[40]=x>>>0&255,e[41]=x>>>8&255,e[42]=x>>>16&255,e[43]=x>>>24&255,e[44]=M>>>0&255,e[45]=M>>>8&255,e[46]=M>>>16&255,e[47]=M>>>24&255,e[48]=K>>>0&255,e[49]=K>>>8&255,e[50]=K>>>16&255,e[51]=K>>>24&255,e[52]=D>>>0&255,e[53]=D>>>8&255,e[54]=D>>>16&255,e[55]=D>>>24&255,e[56]=I>>>0&255,e[57]=I>>>8&255,e[58]=I>>>16&255,e[59]=I>>>24&255,e[60]=T>>>0&255,e[61]=T>>>8&255,e[62]=T>>>16&255,e[63]=T>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,s=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,f=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,y=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,_=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,p=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,w=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,k=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,g=0;g<20;g+=2)o^=(i=(v^=(i=(h^=(i=(c^=(i=o+v|0)<<7|i>>>25)+o|0)<<9|i>>>23)+c|0)<<13|i>>>19)+h|0)<<18|i>>>14,f^=(i=(a^=(i=(w^=(i=(y^=(i=f+a|0)<<7|i>>>25)+f|0)<<9|i>>>23)+y|0)<<13|i>>>19)+w|0)<<18|i>>>14,_^=(i=(l^=(i=(u^=(i=(b^=(i=_+l|0)<<7|i>>>25)+_|0)<<9|i>>>23)+b|0)<<13|i>>>19)+u|0)<<18|i>>>14,k^=(i=(p^=(i=(d^=(i=(s^=(i=k+p|0)<<7|i>>>25)+k|0)<<9|i>>>23)+s|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(s^=(i=(u^=(i=(a^=(i=o+s|0)<<7|i>>>25)+o|0)<<9|i>>>23)+a|0)<<13|i>>>19)+u|0)<<18|i>>>14,f^=(i=(c^=(i=(d^=(i=(l^=(i=f+c|0)<<7|i>>>25)+f|0)<<9|i>>>23)+l|0)<<13|i>>>19)+d|0)<<18|i>>>14,_^=(i=(y^=(i=(h^=(i=(p^=(i=_+y|0)<<7|i>>>25)+_|0)<<9|i>>>23)+p|0)<<13|i>>>19)+h|0)<<18|i>>>14,k^=(i=(b^=(i=(w^=(i=(v^=(i=k+b|0)<<7|i>>>25)+k|0)<<9|i>>>23)+v|0)<<13|i>>>19)+w|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=f>>>0&255,e[5]=f>>>8&255,e[6]=f>>>16&255,e[7]=f>>>24&255,e[8]=_>>>0&255,e[9]=_>>>8&255,e[10]=_>>>16&255,e[11]=_>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=y>>>0&255,e[29]=y>>>8&255,e[30]=y>>>16&255,e[31]=y>>>24&255}(e,t,r,n)}var k=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function g(e,t,r,n,i,o,a){var u,s,c=new Uint8Array(16),f=new Uint8Array(64);for(s=0;s<16;s++)c[s]=0;for(s=0;s<8;s++)c[s]=o[s];for(;i>=64;){for(w(f,c,a,k),s=0;s<64;s++)e[t+s]=r[n+s]^f[s];for(u=1,s=8;s<16;s++)u=u+(255&c[s])|0,c[s]=255&u,u>>>=8;i-=64,t+=64,n+=64}if(i>0)for(w(f,c,a,k),s=0;s<i;s++)e[t+s]=r[n+s]^f[s];return 0}function A(e,t,r,n,i){var o,a,u=new Uint8Array(16),s=new Uint8Array(64);for(a=0;a<16;a++)u[a]=0;for(a=0;a<8;a++)u[a]=n[a];for(;r>=64;){for(w(s,u,i,k),a=0;a<64;a++)e[t+a]=s[a];for(o=1,a=8;a<16;a++)o=o+(255&u[a])|0,u[a]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(w(s,u,i,k),a=0;a<r;a++)e[t+a]=s[a];return 0}function E(e,t,r,n,i){var o=new Uint8Array(32);b(o,n,i,k);for(var a=new Uint8Array(8),u=0;u<8;u++)a[u]=n[u+16];return A(e,t,r,a,o)}function m(e,t,r,n,i,o,a){var u=new Uint8Array(32);b(u,o,a,k);for(var s=new Uint8Array(8),c=0;c<8;c++)s[c]=o[c+16];return g(e,t,r,n,i,s,u)}var O=function(e){var t,r,n,i,o,a,u,s;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|a<<2),u=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|u<<5),s=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(u>>>8|s<<8),this.r[9]=s>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function S(e,t,r,n,i,o){var a=new O(o);return a.update(r,n,i),a.finish(e,t),0}function C(e,t,r,n,i,o){var a=new Uint8Array(16);return S(a,0,r,n,i,o),p(e,t,a,0)}function P(e,t,r,n,i){var o;if(r<32)return-1;for(m(e,0,t,0,r,n,i),S(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function j(e,t,r,n,i){var o,a=new Uint8Array(32);if(r<32)return-1;if(E(a,0,32,n,i),0!==C(t,16,t,32,r-32,a))return-1;for(m(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function U(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function x(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function M(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function K(e,r){var n,i,o,a=t(),u=t();for(n=0;n<16;n++)u[n]=r[n];for(x(u),x(u),x(u),i=0;i<2;i++){for(a[0]=u[0]-65517,n=1;n<15;n++)a[n]=u[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=u[15]-32767-(a[14]>>16&1),o=a[15]>>16&1,a[14]&=65535,M(u,a,1-o)}for(n=0;n<16;n++)e[2*n]=255&u[n],e[2*n+1]=u[n]>>8}function D(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return K(r,e),K(n,t),v(r,0,n,0)}function I(e){var t=new Uint8Array(32);return K(t,e),1&t[0]}function T(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function R(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function z(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function N(e,t,r){var n,i,o=0,a=0,u=0,s=0,c=0,f=0,l=0,d=0,h=0,y=0,_=0,p=0,v=0,w=0,b=0,k=0,g=0,A=0,E=0,m=0,O=0,S=0,C=0,P=0,j=0,U=0,x=0,M=0,K=0,D=0,I=0,T=r[0],R=r[1],z=r[2],N=r[3],L=r[4],B=r[5],Y=r[6],X=r[7],G=r[8],F=r[9],V=r[10],H=r[11],Z=r[12],W=r[13],q=r[14],J=r[15];o+=(n=t[0])*T,a+=n*R,u+=n*z,s+=n*N,c+=n*L,f+=n*B,l+=n*Y,d+=n*X,h+=n*G,y+=n*F,_+=n*V,p+=n*H,v+=n*Z,w+=n*W,b+=n*q,k+=n*J,a+=(n=t[1])*T,u+=n*R,s+=n*z,c+=n*N,f+=n*L,l+=n*B,d+=n*Y,h+=n*X,y+=n*G,_+=n*F,p+=n*V,v+=n*H,w+=n*Z,b+=n*W,k+=n*q,g+=n*J,u+=(n=t[2])*T,s+=n*R,c+=n*z,f+=n*N,l+=n*L,d+=n*B,h+=n*Y,y+=n*X,_+=n*G,p+=n*F,v+=n*V,w+=n*H,b+=n*Z,k+=n*W,g+=n*q,A+=n*J,s+=(n=t[3])*T,c+=n*R,f+=n*z,l+=n*N,d+=n*L,h+=n*B,y+=n*Y,_+=n*X,p+=n*G,v+=n*F,w+=n*V,b+=n*H,k+=n*Z,g+=n*W,A+=n*q,E+=n*J,c+=(n=t[4])*T,f+=n*R,l+=n*z,d+=n*N,h+=n*L,y+=n*B,_+=n*Y,p+=n*X,v+=n*G,w+=n*F,b+=n*V,k+=n*H,g+=n*Z,A+=n*W,E+=n*q,m+=n*J,f+=(n=t[5])*T,l+=n*R,d+=n*z,h+=n*N,y+=n*L,_+=n*B,p+=n*Y,v+=n*X,w+=n*G,b+=n*F,k+=n*V,g+=n*H,A+=n*Z,E+=n*W,m+=n*q,O+=n*J,l+=(n=t[6])*T,d+=n*R,h+=n*z,y+=n*N,_+=n*L,p+=n*B,v+=n*Y,w+=n*X,b+=n*G,k+=n*F,g+=n*V,A+=n*H,E+=n*Z,m+=n*W,O+=n*q,S+=n*J,d+=(n=t[7])*T,h+=n*R,y+=n*z,_+=n*N,p+=n*L,v+=n*B,w+=n*Y,b+=n*X,k+=n*G,g+=n*F,A+=n*V,E+=n*H,m+=n*Z,O+=n*W,S+=n*q,C+=n*J,h+=(n=t[8])*T,y+=n*R,_+=n*z,p+=n*N,v+=n*L,w+=n*B,b+=n*Y,k+=n*X,g+=n*G,A+=n*F,E+=n*V,m+=n*H,O+=n*Z,S+=n*W,C+=n*q,P+=n*J,y+=(n=t[9])*T,_+=n*R,p+=n*z,v+=n*N,w+=n*L,b+=n*B,k+=n*Y,g+=n*X,A+=n*G,E+=n*F,m+=n*V,O+=n*H,S+=n*Z,C+=n*W,P+=n*q,j+=n*J,_+=(n=t[10])*T,p+=n*R,v+=n*z,w+=n*N,b+=n*L,k+=n*B,g+=n*Y,A+=n*X,E+=n*G,m+=n*F,O+=n*V,S+=n*H,C+=n*Z,P+=n*W,j+=n*q,U+=n*J,p+=(n=t[11])*T,v+=n*R,w+=n*z,b+=n*N,k+=n*L,g+=n*B,A+=n*Y,E+=n*X,m+=n*G,O+=n*F,S+=n*V,C+=n*H,P+=n*Z,j+=n*W,U+=n*q,x+=n*J,v+=(n=t[12])*T,w+=n*R,b+=n*z,k+=n*N,g+=n*L,A+=n*B,E+=n*Y,m+=n*X,O+=n*G,S+=n*F,C+=n*V,P+=n*H,j+=n*Z,U+=n*W,x+=n*q,M+=n*J,w+=(n=t[13])*T,b+=n*R,k+=n*z,g+=n*N,A+=n*L,E+=n*B,m+=n*Y,O+=n*X,S+=n*G,C+=n*F,P+=n*V,j+=n*H,U+=n*Z,x+=n*W,M+=n*q,K+=n*J,b+=(n=t[14])*T,k+=n*R,g+=n*z,A+=n*N,E+=n*L,m+=n*B,O+=n*Y,S+=n*X,C+=n*G,P+=n*F,j+=n*V,U+=n*H,x+=n*Z,M+=n*W,K+=n*q,D+=n*J,k+=(n=t[15])*T,a+=38*(A+=n*z),u+=38*(E+=n*N),s+=38*(m+=n*L),c+=38*(O+=n*B),f+=38*(S+=n*Y),l+=38*(C+=n*X),d+=38*(P+=n*G),h+=38*(j+=n*F),y+=38*(U+=n*V),_+=38*(x+=n*H),p+=38*(M+=n*Z),v+=38*(K+=n*W),w+=38*(D+=n*q),b+=38*(I+=n*J),o=(n=(o+=38*(g+=n*R))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),k=(n=k+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),k=(n=k+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=u,e[3]=s,e[4]=c,e[5]=f,e[6]=l,e[7]=d,e[8]=h,e[9]=y,e[10]=_,e[11]=p,e[12]=v,e[13]=w,e[14]=b,e[15]=k}function L(e,t){N(e,t,t)}function B(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)L(i,i),2!==n&&4!==n&&N(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function Y(e,r,n){var i,o,a=new Uint8Array(32),u=new Float64Array(80),c=t(),f=t(),l=t(),d=t(),h=t(),y=t();for(o=0;o<31;o++)a[o]=r[o];for(a[31]=127&r[31]|64,a[0]&=248,T(u,n),o=0;o<16;o++)f[o]=u[o],d[o]=c[o]=l[o]=0;for(c[0]=d[0]=1,o=254;o>=0;--o)M(c,f,i=a[o>>>3]>>>(7&o)&1),M(l,d,i),R(h,c,l),z(c,c,l),R(l,f,d),z(f,f,d),L(d,h),L(y,c),N(c,l,c),N(l,f,h),R(h,c,l),z(c,c,l),L(f,c),z(l,d,y),N(c,l,s),R(c,c,d),N(l,l,c),N(c,d,y),N(d,f,u),L(f,h),M(c,f,i),M(l,d,i);for(o=0;o<16;o++)u[o+16]=c[o],u[o+32]=l[o],u[o+48]=f[o],u[o+64]=d[o];var _=u.subarray(32),p=u.subarray(16);return B(_,_),N(p,p,_),K(e,p),0}function X(e,t){return Y(e,t,o)}function G(e,t){return n(t,32),X(e,t)}function F(e,t,r){var n=new Uint8Array(32);return Y(n,r,t),b(e,i,n,k)}O.prototype.blocks=function(e,t,r){for(var n,i,o,a,u,s,c,f,l,d,h,y,_,p,v,w,b,k,g,A=this.fin?0:2048,E=this.h[0],m=this.h[1],O=this.h[2],S=this.h[3],C=this.h[4],P=this.h[5],j=this.h[6],U=this.h[7],x=this.h[8],M=this.h[9],K=this.r[0],D=this.r[1],I=this.r[2],T=this.r[3],R=this.r[4],z=this.r[5],N=this.r[6],L=this.r[7],B=this.r[8],Y=this.r[9];r>=16;)E+=8191&(n=255&e[t+0]|(255&e[t+1])<<8),m+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3),O+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6),S+=8191&(o>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9),C+=8191&(a>>>4|(u=255&e[t+8]|(255&e[t+9])<<8)<<12),P+=u>>>1&8191,j+=8191&(u>>>14|(s=255&e[t+10]|(255&e[t+11])<<8)<<2),U+=8191&(s>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5),f=255&e[t+14]|(255&e[t+15])<<8,d=l=0,d+=E*K,d+=m*(5*Y),d+=O*(5*B),d+=S*(5*L),l=(d+=C*(5*N))>>>13,d&=8191,d+=P*(5*z),d+=j*(5*R),d+=U*(5*T),d+=(x+=8191&(c>>>8|f<<8))*(5*I),h=l+=(d+=(M+=f>>>5|A)*(5*D))>>>13,h+=E*D,h+=m*K,h+=O*(5*Y),h+=S*(5*B),l=(h+=C*(5*L))>>>13,h&=8191,h+=P*(5*N),h+=j*(5*z),h+=U*(5*R),h+=x*(5*T),l+=(h+=M*(5*I))>>>13,h&=8191,y=l,y+=E*I,y+=m*D,y+=O*K,y+=S*(5*Y),l=(y+=C*(5*B))>>>13,y&=8191,y+=P*(5*L),y+=j*(5*N),y+=U*(5*z),y+=x*(5*R),_=l+=(y+=M*(5*T))>>>13,_+=E*T,_+=m*I,_+=O*D,_+=S*K,l=(_+=C*(5*Y))>>>13,_&=8191,_+=P*(5*B),_+=j*(5*L),_+=U*(5*N),_+=x*(5*z),p=l+=(_+=M*(5*R))>>>13,p+=E*R,p+=m*T,p+=O*I,p+=S*D,l=(p+=C*K)>>>13,p&=8191,p+=P*(5*Y),p+=j*(5*B),p+=U*(5*L),p+=x*(5*N),v=l+=(p+=M*(5*z))>>>13,v+=E*z,v+=m*R,v+=O*T,v+=S*I,l=(v+=C*D)>>>13,v&=8191,v+=P*K,v+=j*(5*Y),v+=U*(5*B),v+=x*(5*L),w=l+=(v+=M*(5*N))>>>13,w+=E*N,w+=m*z,w+=O*R,w+=S*T,l=(w+=C*I)>>>13,w&=8191,w+=P*D,w+=j*K,w+=U*(5*Y),w+=x*(5*B),b=l+=(w+=M*(5*L))>>>13,b+=E*L,b+=m*N,b+=O*z,b+=S*R,l=(b+=C*T)>>>13,b&=8191,b+=P*I,b+=j*D,b+=U*K,b+=x*(5*Y),k=l+=(b+=M*(5*B))>>>13,k+=E*B,k+=m*L,k+=O*N,k+=S*z,l=(k+=C*R)>>>13,k&=8191,k+=P*T,k+=j*I,k+=U*D,k+=x*K,g=l+=(k+=M*(5*Y))>>>13,g+=E*Y,g+=m*B,g+=O*L,g+=S*N,l=(g+=C*z)>>>13,g&=8191,g+=P*R,g+=j*T,g+=U*I,g+=x*D,E=d=8191&(l=(l=((l+=(g+=M*K)>>>13)<<2)+l|0)+(d&=8191)|0),m=h+=l>>>=13,O=y&=8191,S=_&=8191,C=p&=8191,P=v&=8191,j=w&=8191,U=b&=8191,x=k&=8191,M=g&=8191,t+=16,r-=16;this.h[0]=E,this.h[1]=m,this.h[2]=O,this.h[3]=S,this.h[4]=C,this.h[5]=P,this.h[6]=j,this.h[7]=U,this.h[8]=x,this.h[9]=M},O.prototype.finish=function(e,t){var r,n,i,o,a=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,a[0]=this.h[0]+5,r=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this.h[o]+r,r=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,n=(1^r)-1,o=0;o<10;o++)a[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|a[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},O.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var V=P,H=j;var Z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function W(e,t,r,n){for(var i,o,a,u,s,c,f,l,d,h,y,_,p,v,w,b,k,g,A,E,m,O,S,C,P,j,U=new Int32Array(16),x=new Int32Array(16),M=e[0],K=e[1],D=e[2],I=e[3],T=e[4],R=e[5],z=e[6],N=e[7],L=t[0],B=t[1],Y=t[2],X=t[3],G=t[4],F=t[5],V=t[6],H=t[7],W=0;n>=128;){for(A=0;A<16;A++)E=8*A+W,U[A]=r[E+0]<<24|r[E+1]<<16|r[E+2]<<8|r[E+3],x[A]=r[E+4]<<24|r[E+5]<<16|r[E+6]<<8|r[E+7];for(A=0;A<80;A++)if(i=M,o=K,a=D,u=I,s=T,c=R,f=z,l=N,d=L,h=B,y=Y,_=X,p=G,v=F,w=V,b=H,S=65535&(O=H),C=O>>>16,P=65535&(m=N),j=m>>>16,S+=65535&(O=(G>>>14|T<<18)^(G>>>18|T<<14)^(T>>>9|G<<23)),C+=O>>>16,P+=65535&(m=(T>>>14|G<<18)^(T>>>18|G<<14)^(G>>>9|T<<23)),j+=m>>>16,S+=65535&(O=G&F^~G&V),C+=O>>>16,P+=65535&(m=T&R^~T&z),j+=m>>>16,m=Z[2*A],S+=65535&(O=Z[2*A+1]),C+=O>>>16,P+=65535&m,j+=m>>>16,m=U[A%16],C+=(O=x[A%16])>>>16,P+=65535&m,j+=m>>>16,P+=(C+=(S+=65535&O)>>>16)>>>16,S=65535&(O=g=65535&S|C<<16),C=O>>>16,P=65535&(m=k=65535&P|(j+=P>>>16)<<16),j=m>>>16,S+=65535&(O=(L>>>28|M<<4)^(M>>>2|L<<30)^(M>>>7|L<<25)),C+=O>>>16,P+=65535&(m=(M>>>28|L<<4)^(L>>>2|M<<30)^(L>>>7|M<<25)),j+=m>>>16,C+=(O=L&B^L&Y^B&Y)>>>16,P+=65535&(m=M&K^M&D^K&D),j+=m>>>16,l=65535&(P+=(C+=(S+=65535&O)>>>16)>>>16)|(j+=P>>>16)<<16,b=65535&S|C<<16,S=65535&(O=_),C=O>>>16,P=65535&(m=u),j=m>>>16,C+=(O=g)>>>16,P+=65535&(m=k),j+=m>>>16,K=i,D=o,I=a,T=u=65535&(P+=(C+=(S+=65535&O)>>>16)>>>16)|(j+=P>>>16)<<16,R=s,z=c,N=f,M=l,B=d,Y=h,X=y,G=_=65535&S|C<<16,F=p,V=v,H=w,L=b,A%16==15)for(E=0;E<16;E++)m=U[E],S=65535&(O=x[E]),C=O>>>16,P=65535&m,j=m>>>16,m=U[(E+9)%16],S+=65535&(O=x[(E+9)%16]),C+=O>>>16,P+=65535&m,j+=m>>>16,k=U[(E+1)%16],S+=65535&(O=((g=x[(E+1)%16])>>>1|k<<31)^(g>>>8|k<<24)^(g>>>7|k<<25)),C+=O>>>16,P+=65535&(m=(k>>>1|g<<31)^(k>>>8|g<<24)^k>>>7),j+=m>>>16,k=U[(E+14)%16],C+=(O=((g=x[(E+14)%16])>>>19|k<<13)^(k>>>29|g<<3)^(g>>>6|k<<26))>>>16,P+=65535&(m=(k>>>19|g<<13)^(g>>>29|k<<3)^k>>>6),j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,U[E]=65535&P|j<<16,x[E]=65535&S|C<<16;S=65535&(O=L),C=O>>>16,P=65535&(m=M),j=m>>>16,m=e[0],C+=(O=t[0])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[0]=M=65535&P|j<<16,t[0]=L=65535&S|C<<16,S=65535&(O=B),C=O>>>16,P=65535&(m=K),j=m>>>16,m=e[1],C+=(O=t[1])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[1]=K=65535&P|j<<16,t[1]=B=65535&S|C<<16,S=65535&(O=Y),C=O>>>16,P=65535&(m=D),j=m>>>16,m=e[2],C+=(O=t[2])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[2]=D=65535&P|j<<16,t[2]=Y=65535&S|C<<16,S=65535&(O=X),C=O>>>16,P=65535&(m=I),j=m>>>16,m=e[3],C+=(O=t[3])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[3]=I=65535&P|j<<16,t[3]=X=65535&S|C<<16,S=65535&(O=G),C=O>>>16,P=65535&(m=T),j=m>>>16,m=e[4],C+=(O=t[4])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[4]=T=65535&P|j<<16,t[4]=G=65535&S|C<<16,S=65535&(O=F),C=O>>>16,P=65535&(m=R),j=m>>>16,m=e[5],C+=(O=t[5])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[5]=R=65535&P|j<<16,t[5]=F=65535&S|C<<16,S=65535&(O=V),C=O>>>16,P=65535&(m=z),j=m>>>16,m=e[6],C+=(O=t[6])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[6]=z=65535&P|j<<16,t[6]=V=65535&S|C<<16,S=65535&(O=H),C=O>>>16,P=65535&(m=N),j=m>>>16,m=e[7],C+=(O=t[7])>>>16,P+=65535&m,j+=m>>>16,j+=(P+=(C+=(S+=65535&O)>>>16)>>>16)>>>16,e[7]=N=65535&P|j<<16,t[7]=H=65535&S|C<<16,W+=128,n-=128}return n}function q(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),a=new Uint8Array(256),u=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,W(i,o,t,r),r%=128,n=0;n<r;n++)a[n]=t[u-r+n];for(a[r]=128,a[(r=256-128*(r<112?1:0))-9]=0,y(a,r-8,u/536870912|0,u<<3),W(i,o,a,r),n=0;n<8;n++)y(e,8*n,i[n],o[n]);return 0}function J(e,r){var n=t(),i=t(),o=t(),a=t(),u=t(),s=t(),c=t(),l=t(),d=t();z(n,e[1],e[0]),z(d,r[1],r[0]),N(n,n,d),R(i,e[0],e[1]),R(d,r[0],r[1]),N(i,i,d),N(o,e[3],r[3]),N(o,o,f),N(a,e[2],r[2]),R(a,a,a),z(u,i,n),z(s,a,o),R(c,a,o),R(l,i,n),N(e[0],u,s),N(e[1],l,c),N(e[2],c,s),N(e[3],u,l)}function Q(e,t,r){var n;for(n=0;n<4;n++)M(e[n],t[n],r)}function $(e,r){var n=t(),i=t(),o=t();B(o,r[2]),N(n,r[0],o),N(i,r[1],o),K(e,i),e[31]^=I(n)<<7}function ee(e,t,r){var n,i;for(U(e[0],a),U(e[1],u),U(e[2],u),U(e[3],a),i=255;i>=0;--i)Q(e,t,n=r[i/8|0]>>(7&i)&1),J(t,e),J(e,e),Q(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];U(n[0],l),U(n[1],d),U(n[2],u),N(n[3],l,d),ee(e,n,r)}function re(e,r,i){var o,a=new Uint8Array(64),u=[t(),t(),t(),t()];for(i||n(r,32),q(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,te(u,a),$(e,u),o=0;o<32;o++)r[o+32]=e[o];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function ae(e,r,n,i){var o,a,u=new Uint8Array(64),s=new Uint8Array(64),c=new Uint8Array(64),f=new Float64Array(64),l=[t(),t(),t(),t()];q(u,i,32),u[0]&=248,u[31]&=127,u[31]|=64;var d=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=u[32+o];for(q(c,e.subarray(32),n+32),oe(c),te(l,c),$(e,l),o=32;o<64;o++)e[o]=i[o];for(q(s,e,n+64),oe(s),o=0;o<64;o++)f[o]=0;for(o=0;o<32;o++)f[o]=c[o];for(o=0;o<32;o++)for(a=0;a<32;a++)f[o+a]+=s[o]*u[a];return ie(e.subarray(32),f),d}function ue(e,r){var n=t(),i=t(),o=t(),s=t(),f=t(),l=t(),d=t();return U(e[2],u),T(e[1],r),L(o,e[1]),N(s,o,c),z(o,o,e[2]),R(s,e[2],s),L(f,s),L(l,f),N(d,l,f),N(n,d,o),N(n,n,s),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)L(i,i),1!==n&&N(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(n,n),N(n,n,o),N(n,n,s),N(n,n,s),N(e[0],n,s),L(i,e[0]),N(i,i,s),D(i,o)&&N(e[0],e[0],h),L(i,e[0]),N(i,i,s),D(i,o)?-1:(I(e[0])===r[31]>>7&&z(e[0],a,e[0]),N(e[3],e[0],e[1]),0)}function se(e,r,n,i){var o,a=new Uint8Array(32),u=new Uint8Array(64),s=[t(),t(),t(),t()],c=[t(),t(),t(),t()];if(-1,n<64)return-1;if(ue(c,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(q(u,e,n),oe(u),ee(s,c,u),te(c,r.subarray(32)),J(s,c),$(a,s),n-=64,v(r,0,a,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var ce=32,fe=24,le=32,de=32,he=fe;function ye(e,t){if(e.length!==ce)throw new Error("bad key size");if(t.length!==fe)throw new Error("bad nonce size")}function _e(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function pe(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:m,crypto_stream:E,crypto_stream_salsa20_xor:g,crypto_stream_salsa20:A,crypto_onetimeauth:S,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:v,crypto_secretbox:P,crypto_secretbox_open:j,crypto_scalarmult:Y,crypto_scalarmult_base:X,crypto_box_beforenm:F,crypto_box_afternm:V,crypto_box:function(e,t,r,n,i,o){var a=new Uint8Array(32);return F(a,i,o),V(e,t,r,n,a)},crypto_box_open:function(e,t,r,n,i,o){var a=new Uint8Array(32);return F(a,i,o),H(e,t,r,n,a)},crypto_box_keypair:G,crypto_hash:q,crypto_sign:ae,crypto_sign_keypair:re,crypto_sign_open:se,crypto_secretbox_KEYBYTES:ce,crypto_secretbox_NONCEBYTES:fe,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:le,crypto_box_SECRETKEYBYTES:de,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:he,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){_e(e,t,r),ye(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return P(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){_e(e,t,r),ye(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+16]=e[o];return!(n.length<32)&&(0===j(i,n,n.length,t,r)&&i.subarray(32))},e.secretbox.keyLength=ce,e.secretbox.nonceLength=fe,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(_e(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return Y(r,e,t),r},e.scalarMult.base=function(e){if(_e(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return X(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){_e(e,t),function(e,t){if(e.length!==le)throw new Error("bad public key size");if(t.length!==de)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return F(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(le),t=new Uint8Array(de);return G(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(_e(e),e.length!==de)throw new Error("bad secret key size");var t=new Uint8Array(le);return X(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=le,e.box.secretKeyLength=de,e.box.sharedKeyLength=32,e.box.nonceLength=he,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(_e(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return ae(r,e,e.length,t),r},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(_e(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=se(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(_e(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+e.length),o=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return se(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(_e(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(_e(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){_e(e);var t=new Uint8Array(64);return q(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return _e(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===_(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG(function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];pe(i)})}else(t=r(39))&&t.randomBytes&&e.setPRNG(function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];pe(i)})}()}(e.exports?e.exports:self.nacl=self.nacl||{})},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(1),o=r(0),a=r(8),u=r(26),s=r(3),c=function(){function e(){this.version=-1,this.prekey_id=-1,this.public_key=new s.default,this.identity_key=new a.default,this.signature=null}return e.new=function(t,r){var n=o.default.new_instance(e);return n.version=1,n.prekey_id=r.key_id,n.public_key=r.key_pair.public_key,n.identity_key=t,n.signature=null,n},e.signed=function(t,r){var n=r.key_pair.public_key,i=t.secret_key.sign(n.pub_edward),a=o.default.new_instance(e);return a.version=1,a.prekey_id=r.key_id,a.public_key=n,a.identity_key=t.public_key,a.signature=i,a},e.prototype.verify=function(){return this.signature?this.identity_key.public_key.verify(this.signature,this.public_key.pub_edward)?u.default.VALID:u.default.INVALID:u.default.UNKNOWN},e.prototype.serialise=function(){var e=new n.Encoder;return this.encode(e),e.get_buffer()},e.prototype.serialised_json=function(){return{id:this.prekey_id,key:i.to_base64(new Uint8Array(this.serialise()),i.base64_variants.ORIGINAL)}},e.deserialise=function(t){return e.decode(new n.Decoder(t))},e.prototype.encode=function(e){return e.object(5),e.u8(0),e.u8(this.version),e.u8(1),e.u16(this.prekey_id),e.u8(2),this.public_key.encode(e),e.u8(3),this.identity_key.encode(e),e.u8(4),this.signature?e.bytes(this.signature):e.null()},e.decode=function(t){for(var r=o.default.new_instance(e),n=t.object(),i=0;i<=n-1;i++)switch(t.u8()){case 0:r.version=t.u8();break;case 1:r.prekey_id=t.u16();break;case 2:r.public_key=s.default.decode(t);break;case 3:r.identity_key=a.default.decode(t);break;case 4:r.signature=t.optional(function(){return new Uint8Array(t.bytes())});break;default:t.skip()}return r},e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9);t.CipherMessage=n.default;var i=r(28);t.Envelope=i.default;var o=r(17);t.Message=o.default;var a=r(18);t.PreKeyMessage=a.default;var u=r(21);t.SessionTag=u.default},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.ChainKey=n.default;var i=r(22);t.MessageKeys=i.default;var o=r(44);t.PreKeyStore=o.default;var a=r(29);t.RecvChain=a.default;var u=r(30);t.RootKey=u.default;var s=r(31);t.SendChain=s.default;var c=r(32);t.Session=c.default;var f=r(33);t.SessionState=f.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){}}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13);t.ArrayUtil=n.default;var i=r(0);t.ClassUtil=i.default;var o=r(23);t.KeyDerivationUtil=o.default;var a=r(7);t.MemoryUtil=a.default;var u=r(27);t.RandomUtil=u.default}]);
//# sourceMappingURL=proteus.bundle.js.map