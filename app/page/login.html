<!DOCTYPE html>
<!-- Wire, Copyright (C) 2018 Wire Swiss GmbH -->
<!-- {{@config.VERSION}} -->
<html>
  <head>
    #include('meta.htm')
    #include('graph.htm')
    <title>Wire</title>
    <link rel="stylesheet" href="/style/auth.css?{{@config.VERSION}}">
  </head>

  <body>
    <div class="auth-page-container">
      <div class="auth-page-navigation">
        <!-- ko if: visible_section() === z.auth.AuthView.SECTION.ACCOUNT -->
          <div class="auth-page-navigation-back" data-bind="click: clicked_on_navigate_back">
            <svg width="16" height="16" viewBox="0 0 16 16"><path transform="rotate(180 8 8)" fill="#fff" d="M5.8 1.5L7.3 0l8 8-8 8-1.5-1.5L11.3 9H.7V7h10.6"></path></svg>
          </div>
        <!-- /ko -->
      </div>
      <div class="auth-page">
        <div class="auth-header">
          <div class="wire-link" data-bind="click: clicked_on_wire_link" data-uie-name="go-home">
            <svg class="auth-logo" width="82" height="24" viewBox="0 0 170 50" xmlns="http://www.w3.org/2000/svg">
              <path d="M40.53 41.02c-2.237-2.64-3.59-6.04-3.59-9.753l.005-24.13c0-1.97 1.612-3.57 3.592-3.57s3.592 1.6 3.592 3.57l-.007 24.13c0 3.712-1.354 7.113-3.592 9.752zm26.94-9.753c0 8.362-6.772 15.165-15.19 15.165-3.39 0-6.553-1.117-9.09-2.982 2.836-3.28 4.525-7.53 4.525-12.183l.006-24.13C47.72 3.2 44.5 0 40.538 0c-3.96 0-7.183 3.2-7.183 7.136l-.007 24.13c0 4.653 1.802 8.905 4.638 12.184-2.536 1.865-5.7 2.982-9.09 2.982-8.417 0-15.303-6.803-15.303-15.165V1.83H10v29.437C10 41.597 18.535 50 28.933 50c4.408 0 8.497-1.522 11.71-4.05C43.86 48.48 47.854 50 52.262 50c10.4 0 18.802-8.404 18.802-18.733V1.83H67.47v29.437zm14.374 17.788h3.592V1.733h-3.592v47.322zM116.882.908c-7.088 0-13.353 3.563-17.08 8.98V1.733h-3.59v47.322h3.59v-27.61h.003c0-9.353 7.66-16.962 17.077-16.962V.908zm6.732 38.07c-6.99-8.236-6.584-20.6 1.216-28.357 7.8-7.755 20.236-8.157 28.518-1.208l-29.734 29.565zm34.822-29.574c-.39-.447-.796-.884-1.223-1.308-9.63-9.574-25.295-9.574-34.923 0-9.63 9.573-9.63 25.15 0 34.724 9.627 9.572 25.29 9.573 34.918.004l-2.54-2.526c-7.8 7.752-20.233 8.153-28.514 1.205l14.863-14.78 17.42-17.32z"></path>
              <path d="M164.08 3.052v-.714h-3.89v.714h1.532V7h.82V3.052h1.54zM169.9 7V2.338h-1.183l-1.33 3.64-1.33-3.64h-1.204V7h.8V3.206L167.027 7h.686l1.386-3.8V7h.798z"></path>
            </svg>
          </div>
        </div>
        <div class="content">
          <div id="section-account" class="section">
            <div class="selector selector-mode">
              <button class="button btn-mode btn-login" data-bind="l10n_text: z.string.authAccountSignInPhone"></button>
            </div>

            <div id="form-account-login" class="form">
              <form id="login-method-login" class="method" data-bind="submit: login_phone">
                <div class="form-control input-select">
                  <select class="input phone" id="wire-login-country" name="select"
                          data-bind="event: {change: changed_country}, textInput: country"
                          data-uie-name="enter-country">
                    <option value="X0" style="display:none;" data-bind="l10n_text: z.string.authAccountCountryCode"></option>
                    <option value="X1" style="display:none;" data-bind="l10n_text: z.string.authErrorCountryCodeInvalid"></option>
                    <!-- ko foreach: z.util.CountryCodes.COUNTRY_CODES -->
                      <option data-bind="value: iso, text: name"></option>
                    <!-- /ko -->
                  </select>
                  <label class="icon-forward"></label>
                </div>
                <div class="form-control">
                  <div class="input-group" data-bind="css: {'input-error': failed_validation_phone}">
                    <input class="input phone" id="wire-login-country-code" type="tel" autocomplete="off" maxlength="5" spellcheck="false"
                           data-bind="event: {change: changed_country_code, input: clear_error}, l10n_tooltip: z.string.authAccountCountryCode, textInput: country_code"
                           data-uie-name="enter-county-code">
                    <input class="input phone" id="wire-login-phone" type="tel" autocomplete="off" maxlength="15" spellcheck="false"
                           data-bind="event: {change: changed_phone_number, input: clear_error}, l10n_tooltip: z.string.authPlaceholderPhone, l10n_placeholder: z.string.authPlaceholderPhone, textInput: phone_number"
                           data-uie-name="enter-phone">
                  </div>
                </div>
                <ul class="error-list" data-bind="foreach: validation_errors" data-uie-name="status-error">
                  <li class="error" data-bind="text: message"></li>
                </ul>
                <div id="wire-login-phone-remember" data-bind="electron_remove">
                  <div class="checkbox checkbox-remember">
                    <input type="checkbox" id="checkbox-public-computer-phone" data-bind="checked: is_public_computer" data-uie-name="enter-public-computer-phone-sign-in">
                    <label class="label-xs" for="checkbox-public-computer-phone" data-bind="l10n_text: z.string.authAccountPublicComputer"></label>
                  </div>
                </div>
                <div class="footer">
                    <input id="wire-phone-login" class="button button-white btn-action btn-sign-in-phone" type="submit"
                           data-bind="enable: can_login_phone, l10n_input: z.string.authAccountSignIn"
                           data-uie-name="do-sign-in-phone">
                </div>
              </form>
            </div>
          </div>

          <div id="section-verify" class="section">
            <form id="form-verify-account" class="form" data-bind="submit: verify_account">
              <div class="auth-headline" data-bind="l10n_text: z.string.authVerifyAccountHeadline"></div>
              <div class="auth-headline-sub" data-bind="l10n_text: z.string.authVerifyAccountDetail"></div>
              <div id="wire-verify-account-email-container" class="form-control">
                <input class="input email" id="wire-verify-account-email" type="text" autocomplete="email" maxlength="128" spellcheck="false"
                       data-bind="css: {'input-error': failed_validation_email}, event: {input: clear_error}, l10n_tooltip: z.string.authPlaceholderEmail, l10n_placeholder: z.string.authPlaceholderEmail, textInput: username"
                       data-uie-name="enter-email">
              </div>
              <div id="wire-verify-account-password-container" class="form-control">
                <input class="input password" id="wire-verify-account-password" type="password" maxlength="1024"
                       data-bind="css: {'input-error': failed_validation_password}, event: {input: clear_error_password}, l10n_tooltip: z.string.authPlaceholderPasswordSet, l10n_placeholder: z.string.authPlaceholderPasswordSet, textInput: password"
                       data-uie-name="enter-password">
              </div>
              <ul class="error-list" data-bind="foreach: validation_errors" data-uie-name="status-error">
                <li class="error" data-bind="text: message"></li>
              </ul>
              <div class="footer">
                <div class="column">
                  <input id="wire-verify-account" class="button button-white btn-action" type="submit"
                         data-bind="enable: can_verify_account, l10n_input: z.string.authVerifyAccountAdd"
                         data-uie-name="do-verify-account">
                </div>
                <div class="column">
                  <a class="auth-link-button"
                     data-bind="click: logout, l10n_text: z.string.authLimitButtonSignOut"
                     data-uie-name="go-sign-out">
                  </a>
                </div>
              </div>
            </form>

            <form id="form-verify-code" class="form" data-bind="submit: verify_code">
              <div class="auth-headline-sub verify-code-text" data-bind="text: verify_code_text"></div>
              <div class="form-control">
                <div class="input-group" data-bind="css: {'input-error': failed_validation_code}">
                  <input class="input input-code digit-one" id="wire-verify-code-digit-1" autocomplete="off"
                         data-bind="event: {input: input_phone_code, keydown: keydown_phone_code},
                                    textInput: code_digits()[0]()"
                         data-uie-name="enter-phone-code">
                  <input class="input input-code digit-two" id="wire-verify-code-digit-2" autocomplete="off"
                         data-bind="event: {input: input_phone_code, keydown: keydown_phone_code},
                                    textInput: code_digits()[1]()"
                         data-uie-name="enter-phone-code">
                  <input class="input input-code digit-three" id="wire-verify-code-digit-3" autocomplete="off"
                         data-bind="event: {input: input_phone_code, keydown: keydown_phone_code},
                                    textInput: code_digits()[2]"
                         data-uie-name="enter-phone-code">
                  <input class="input input-code digit-four" id="wire-verify-code-digit-4" autocomplete="off"
                         data-bind="event: {input: input_phone_code, keydown: keydown_phone_code},
                                    textInput: code_digits()[3]"
                         data-uie-name="enter-phone-code">
                  <input class="input input-code digit-five" id="wire-verify-code-digit-5" autocomplete="off"
                         data-bind="event: {input: input_phone_code, keydown: keydown_phone_code},
                                    textInput: code_digits()[4]"
                         data-uie-name="enter-phone-code">
                  <input class="input input-code digit-six" id="wire-verify-code-digit-6" autocomplete="off"
                         data-bind="event: {input: input_phone_code, keydown: keydown_phone_code},
                                    textInput: code_digits()[5]"
                         data-uie-name="enter-phone-code">
                </div>
              </div>
              <ul class="error-list" data-uie-name="status-error">
                <!-- ko foreach: validation_errors -->
                  <li class="error" data-bind="text: message"></li>
                <!-- /ko -->
              </ul>
              <div class="footer">
                <div class="verify-action-detail" data-bind="l10n_text: z.string.authVerifyCodeResend"></div>
                <!-- ko if: can_resend_code -->
                  <div id="wire-resend-code" class="auth-text-link verify-link verify-action-link"
                       data-bind="click: clicked_on_resend_code, l10n_text: z.string.authVerifyCodeResendDetail"></div>
                <!-- /ko -->
                <!-- ko ifnot: can_resend_code -->
                  <div class="verify-action-detail" data-bind="text: verify_code_timer_text"></div>
                <!-- /ko -->
                <div id="verify-change-link" class="auth-text-link verify-link"
                     data-bind="click: clicked_on_change_phone, l10n_text: z.string.authVerifyCodeChangePhone">
                </div>
              </div>
            </form>

            <form id="form-verify-phone-password" class="form" data-bind="submit: verify_password">
              <div class="auth-headline verify-password-text" data-bind="l10n_text: z.string.authVerifyPasswordHeadline"></div>
              <div id="wire-verify-phone-password-container" class="form-control">
                <input class="input password" id="wire-verify-password-input" type="password" maxlength="1024"
                       data-bind="css: {'input-error': failed_validation_password}, event: {input: clear_error_password}, l10n_tooltip: z.string.authPlaceholderPasswordPut, l10n_placeholder: z.string.authPlaceholderPasswordPut, textInput: password"
                       data-uie-name="enter-password">
              </div>
              <ul class="error-list" data-bind="foreach: validation_errors" data-uie-name="status-error">
                <li class="error" data-bind="text: message"></li>
              </ul>
              <div class="footer">
                <div class="column">
                  <input id="wire-verify-password" class="button button-white btn-action" type="submit"
                         data-bind="enable: can_verify_password, l10n_input: z.string.authAccountSignIn"
                         data-uie-name="do-login-in">
                </div>
                <div class="column">
                  <a class="auth-link-button"
                     data-bind="click: clicked_on_password, l10n_text: z.string.authAccountPasswordForgot"
                     data-uie-name="go-forgot-password">
                  </a>
                </div>
              </div>
            </form>
          </div>

          <div id="section-limit" class="section">
            <div class="auth-headline" data-bind="l10n_text: z.string.authLimitDescription"></div>
            <div class="footer">
              <div class="column">
                <span class="button button-white button-fluid"
                       data-bind="click: clicked_on_manage_devices, l10n_text: z.string.authLimitButtonManage"
                       data-uie-name="do-manage-devices"></span>
              </div>
              <div class="column">
                <a class="auth-link-button"
                   data-bind="click: logout, l10n_text: z.string.authLimitButtonSignOut"
                   data-uie-name="go-sign-out">
                </a>
              </div>
            </div>
          </div>

          <div id="section-history" class="section">
            <!-- ko if: deviceReused -->
              <div class="auth-headline" data-bind="l10n_text: z.string.authHistoryReuseHeadline"></div>
              <div class="auth-headline-sub" data-bind="l10n_text: z.string.authHistoryReuseDescription"></div>
            <!-- /ko -->
            <!-- ko ifnot: deviceReused -->
              <div class="auth-headline" data-bind="l10n_text: z.string.authHistoryHeadline"></div>
              <div class="auth-headline-sub" data-bind="l10n_text: z.string.authHistoryDescription"></div>
            <!-- /ko -->
            <div class="footer">
              <div class="button-group">
                <!-- ko ifnot: deviceReused -->
                  <a class="button button-outline" rel="nofollow noopener noreferrer" target="_blank"
                     data-bind="l10n_href: {support: z.config.SUPPORT.ID.HISTORY}, l10n_text: z.string.warningLearnMore"
                     data-uie-name="do-history-learn-more"></a>
                <!-- /ko -->
                <span class="button button-white"
                    data-bind="click: click_on_history_confirm, l10n_text: z.string.authHistoryButton"
                    data-uie-name="do-history-confirm"></span>
              </div>
            </div>
          </div>

          <div id="section-posted" class="section">
            <div class="posted-icon">
              <div class="icon-envelope"></div>
              <div class="icon-check"></div>
              <div class="icon-spinner spin"></div>
            </div>
            <div class="form-posted">
              <div id="form-posted-verify" class="posted-content" data-bind="visible: posted_mode_verify">
                <div class="auth-headline" data-bind="l10n_text: z.string.authPostedResendHeadline"></div>
                <div class="auth-headline-sub posted-message-detail" data-bind="l10n_text: z.string.authPostedResendDetail"></div>
                <div class="posted-action-detail" data-bind="l10n_text: z.string.authPostedResendAction"></div>
                <span id="wire-verify" class="auth-text-link posted-link"
                     data-bind="click: clicked_on_resend_verification, enabled: can_register, text: posted_text" ></span>
              </div>
            </div>
          </div>

          <div id="section-blocked" class="section">
            <div class="form-blocked">
              <div id="form-blocked-cookies" class="blocked-content" data-bind="visible: blocked_mode_cookies">
                <div class="auth-headline" data-bind="l10n_text: z.string.authBlockedCookies"></div>
              </div>
              <div id="form-blocked-database" class="blocked-content" data-bind="visible: blocked_mode_database">
                <div class="auth-headline" data-bind="l10n_text: z.string.authBlockedDatabase"></div>
              </div>
              <div id="form-blocked-tabs" class="blocked-content" data-bind="visible: blocked_mode_tabs">
                <div class="auth-headline blocked-headline" data-bind="l10n_text: z.string.authBlockedTabs"></div>
                <span class="auth-text-link" data-bind="click: clickOnHandover, l10n_text: z.string.authBlockedTabsAction"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="auth-page-navigation"></div>

      <div id="modal-limit" class="modal modal-limit" data-uie-name="modal-manage-devices">
        <div class="modal-content">
          <header>
            <span class="modal-button-close button-icon icon-close" data-bind="click: close_model_manage_devices" data-uie-name="do-close"></span>
            <div class="title" data-bind="l10n_text: z.string.authLimitDevicesHeadline"></div>
          </header>
          <!-- ko foreach: permanent_devices -->
            <section class="modal-limit-section">
              <span class="modal-limit-section-header" data-bind="text: $data.model" data-uie-name="device-header-model"></span>
              <device-card params="device: $data, locationRepository: $parent.locationRepository, detailed: true"></device-card>
              <device-remove params="device: $data, error: $parent.remove_form_error, remove: $parent.click_on_remove_device_submit"></device-remove>
            </section>
          <!-- /ko -->
        </div>
      </div>
    </div>

    <script src="/config.js?{{@config.VERSION}}"></script>
    <script src="/min/dexie.js?{{@config.VERSION}}"></script>
    <script src="/min/vendor.js?{{@config.VERSION}}"></script>
    <script src="/min/runtime.js?{{@config.VERSION}}"></script>
    <script src="/min/login.js?{{@config.VERSION}}"></script>
  </body>
</html>
